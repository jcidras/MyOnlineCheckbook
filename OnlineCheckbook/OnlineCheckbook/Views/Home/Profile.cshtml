@model OnlineCheckbook.Models.User
@using OnlineCheckbook.Models
@{
    ViewBag.Title = "Profile";
}

<div>
    <h4>Pofile Info</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            Profile Of
        </dt>
        <dd>
            @Html.DisplayFor(modelItem => modelItem.Username)
        </dd>
        <dd>
            @Html.ActionLink("Edit?", "Edit", "User", new { id = Model.UserID }, new { @class = "btn btn-default" })
        </dd> 
    </dl>

    @Html.ActionLink("Add Bank", "Create", "Bank", new { id = @Model.UserID }, new { @class = "btn btn-default" })
    
    <h4>Banks</h4>    
    <table class="table">
        <tr>
            <th>
                Bank Name
            </th>
            <th>
                Accounts
            </th>
            <th></th>
            <th></th>
        </tr>
        @if (Model.Banks.Count == 0)
        {
            <tr>
                <td colspan="7">
                    You have no banks. Please add one!
                </td>
            </tr>
        }
        else
        {
            foreach (var bankItem in Model.Banks)
            {
                @Html.HiddenFor(modelItem => bankItem.BankID)
                <tr>
                    <td>
                        @Html.ActionLink(bankItem.BankName, "Index", "Bank", new { id = bankItem.BankID }, new { })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => bankItem.Accounts.ToList().Count)
                    </td>
                    <td>
                        @Html.ActionLink("Delete", "Delete", "Bank", new { id = @bankItem.BankID, userId = @bankItem.UserID }, new { @class = "btn btn-danger" })
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", "Bank", new { id = @bankItem.BankID }, new { @class = "btn btn-default" })
                    </td>
                </tr>
            }
        }
    </table>    
</div>


<script type="text/javascript">
    $('.btn-danger').click(function (e) {
        if (!confirm('Do you wish to delete this bank?')) {
            e.preventDefault();
        }        
    });
</script>

